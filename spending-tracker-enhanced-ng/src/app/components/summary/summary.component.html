@if (chartsViewModel$ | async; as vm) {

<div class="summary-container">
  <table>
    <thead>
      <tr class="header">
        <td class="category-name">Income</td>
        <td>Percentage</td>
        <td>Total</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let income of vm.childIncome; index as $index">
        <td class="category-name">{{ income.category_Name }}</td>
        <td>
          {{ income.percent_Of_Total / 100 | percent : "1.2-2" }}
        </td>
        <td>{{ income.total_Amount | currency }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="category-name"><strong>Total</strong></td>
        <td class="bold">
          {{ incomeTotalPercent / 100 | percent : "1.2-2" }}
        </td>
        <td class="bold">{{ incomeTotalAmount | currency }}</td>
      </tr>
    </tfoot>
  </table>

  <table>
    <thead>
      <tr class="header">
        <td class="category-name">Expenses, Investments, & Savings</td>
        <td>Percentage</td>
        <td>Total</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let expense of vm.childExpenses; index as $index">
        <td class="category-name">{{ expense.category_Name }}</td>
        <td>
          {{ expense.percent_Of_Total / 100 | percent : "1.2-2" }}
        </td>
        <td>{{ expense.total_Amount | currency }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="category-name"><strong>Total</strong></td>
        <td class="bold">
          {{ expenseTotalPercent / 100 | percent : "1.2-2" }}
        </td>
        <td class="bold">{{ expenseTotalAmount | currency }}</td>
      </tr>
    </tfoot>
  </table>

  <table>
    <thead>
      <tr class="header">
        <td class="category-name">Category Breakdown</td>
        <td>Percentage</td>
        <td>Total</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let expense of vm.parentExpenses; index as $index">
        <td class="category-name">{{ expense.category_Name }}</td>
        <td>
          {{ expense.percent_Of_Total / 100 | percent : "1.2-2" }}
        </td>
        <td>{{ expense.total_Amount | currency }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="category-name"><strong>Total</strong></td>
        <td class="bold">
          {{ categoryTotalPercent / 100 | percent : "1.2-2" }}
        </td>
        <td class="bold">{{ categoryTotalAmount | currency }}</td>
      </tr>
    </tfoot>
  </table>

  <ngx-charts-pie-chart
    [view]="view"
    [scheme]="colorScheme"
    [results]="vm.expensePieChart"
    [gradient]="gradient"
    [legend]="showLegend"
    [labels]="showLabels"
    [trimLabels]="false"
    [doughnut]="isDoughnut"
    (select)="onSelect($event)"
    (activate)="onActivate($event)"
    (deactivate)="onDeactivate($event)"
  >
  </ngx-charts-pie-chart>
  <ngx-charts-pie-chart
    [view]="view"
    [scheme]="colorScheme"
    [results]="vm.incomePieChart"
    [gradient]="gradient"
    [legend]="showLegend"
    [labels]="showLabels"
    [trimLabels]="false"
    [doughnut]="isDoughnut"
    (select)="onSelect($event)"
    (activate)="onActivate($event)"
    (deactivate)="onDeactivate($event)"
  >
  </ngx-charts-pie-chart>

  <!-- <ngx-charts-sankey
        [view]="view"
        [results]="sankeyData"
        [scheme]="colorScheme"
        [schemeType]="schemeType"
        [customColors]="colorScheme"
        [tooltipDisabled]="tooltipDisabled"
        [animations]="animations"
        [showLabels]="showLabels"
        (select)="onSelect($event)"
        (activate)="onActivate($event)"
        (deactivate)="onDeactivate($event)"
      >
      </ngx-charts-sankey> -->
</div>
}
